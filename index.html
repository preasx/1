<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Redirecting...</title>
  <style>
    body {
      display: flex;
      justify-content: center;
      align-items: center;
      font-family: sans-serif;
      height: 100vh;
      margin: 0;
      background-color: #111;
      color: #eee;
      flex-direction: column;
    }
    small { margin-top: 1em; color: #888; }
  </style>
</head>
<body>
  <h2>üîÅ Redirecting...</h2>
  <small id="status">Please wait</small>

  <script>
    (async () => {
      const host = window.location.hostname;
      const subdomain = host.split('.')[0];
      const gistUrl = "https://gist.githubusercontent.com/Preasx24/451a35def0daf123212fcb9729d3dfdd/raw/gistfile1.txt";

      const status = document.getElementById("status");

      try {
        const res = await fetch(gistUrl, { cache: "no-store" });
        const json = await res.json();

        if (json[subdomain]) {
          const entry = json[subdomain];
          const now = Date.now() / 1000;

          if (entry.expires > now) {
            status.textContent = "Found. Redirecting now...";
            window.location.href = entry.url;
          } else {
            status.textContent = "‚è±Ô∏è Link expired.";
          }
        } else {
          status.textContent = "‚ùå No URL mapped for this subdomain.";
        }
      } catch (e) {
        status.textContent = "‚ö†Ô∏è Failed to fetch redirect map.";
        console.error(e);
      }
    })();
  </script>
</body>
</html>